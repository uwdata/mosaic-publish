meta:
  title: Airline Performance
data:
  airlines:
    file: https://idl.uw.edu/mosaic-datasets/data/flights.parquet
    select:
      - airline
      - delay
      - time
    where: airline != 'KS' AND airline != '9K'
params:
  filter: { select: single }
  ci: { value: 0.95 }
vconcat:
- hconcat:
  - slider:
      select: interval
      field: time
      as: $filter
      min: 6
      max: 24
      step: 0.1
      value: 24
      label: Depart By
  - slider:
      as: $ci
      min: 0.5
      max: 0.999
      step: 0.001
      label: Conf. Level
- plot:
  - mark: tickX
    data: [{ x: 0 }]
    stroke: '#ccc'
    strokeDasharray: '3 3'
  - mark: errorbarX
    data: { from: airlines, filterBy: $filter }
    ci: $ci
    x: delay
    y: airline
    strokeWidth: 1
    marker: tick
    sort: { y: '-x' }
  - mark: text
    data: { from: airlines, filterBy: $filter }
    frameAnchor: right
    fontSize: 8
    fill: '#999'
    dx: 50
    text: { count: }
    y: airline
  xDomain: [-15, 15]
  xLabel: Arrival Delay (minutes)
  xLabelAnchor: center
  yDomain: Fixed
  yTickFormat: |
    {
      'KS': 'Peninsula',
      'AX': 'Trans States',
      '9K': 'Cape Air',
      'C5': 'CommuteAir',
      'EV': 'ExpressJet',
      'YV': 'Mesa',
      'ZW': 'Air Wisconsin',
      'F9': 'Frontier',
      'OO': 'SkyWest',
      'AA': 'American',
      'MQ': 'Envoy',
      'NK': 'Spirit',
      'HA': 'Hawaiian',
      'G7': 'GoJet',
      'QX': 'Horizon',
      'CP': 'Alis Cargo',
      'G4': 'Allegiant',
      'EM': 'Empire',
      'OH': 'PSA',
      '9E': 'Endeavor',
      'AS': 'Alaska',
      'B6': 'JetBlue',
      'UA': 'United',
      'DL': 'Delta',
      'VX': 'Virgin America',
      'PT': 'Piedmont',
      'YX': 'Republic',
      'WN': 'Southwest'
    }
  yGrid: true
  yLabel: null
  marginTop: 5
  marginLeft: 83
  marginRight: 52
  width: 565
  height: 400 